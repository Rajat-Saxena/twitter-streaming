<workflow-app xmlns = "uri:oozie:workflow:0.4" name = "locations-workflow">
   <start to = "getEncodedLocations" />

   <action name = "getEncodedLocations">
      <shell xmlns="uri:oozie:shell-action:0.1">
            <job-tracker>${JOB_TRACKER}</job-tracker>
            <name-node>${NAME_NODE}</name-node>
            <configuration>
                <property>
                    <name>mapred.job.queue.name</name>
                    <value>${QUEUE_NAME}</value>
                </property>
            </configuration>
            <exec>${EXE_ENCODED_LOCATIONS}</exec>
	    <file>${ENCODED_LOCATIONS}</file>
	  </shell>
		
      <ok to = "getDecodedLocations" />
      <error to = "kill_job" />
   </action>
   
   <action name = "getDecodedLocations">
      <shell xmlns="uri:oozie:shell-action:0.1">
            <job-tracker>${JOB_TRACKER}</job-tracker>
            <name-node>${NAME_NODE}</name-node>
            <configuration>
                <property>
                    <name>mapred.job.queue.name</name>
                    <value>${QUEUE_NAME}</value>
                </property>
            </configuration>
            <exec>${EXE_DECODED_LOCATIONS}</exec>
	    <file>${DECODED_LOCATIONS}</file>
	  </shell>
		
      <ok to = "geocodeDecodedLocations" />
      <error to = "kill_job" />
   </action>
      
   <action name = "geocodeDecodedLocations">
	  <shell xmlns="uri:oozie:shell-action:0.1">
            <job-tracker>${JOB_TRACKER}</job-tracker>
            <name-node>${NAME_NODE}</name-node>
            <configuration>
                <property>
                    <name>mapred.job.queue.name</name>
                    <value>${QUEUE_NAME}</value>
                </property>
            </configuration>
            <exec>${EXE_GEOCODE_LOCATIONS}</exec>
	    <file>${GEOCODE_LOCATIONS}</file>
	  </shell>
		
      <ok to = "end" />
      <error to = "kill_job" />
   </action>
   
   <kill name = "kill_job">
      <message>Shell action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
   </kill>
	
   <end name = "end" />

</workflow-app>